<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<link rel="stylesheet" type="text/css" href="/common/css/homepage/base.css">
<link rel="stylesheet" type="text/css" href="/common/css/homepage/style.css?v=0312">
<link rel="stylesheet" type="text/css" href="/common/css/homepage/sub.css?v=0312">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="/common/js/comm/jquery.bxslider.js"></script>
<script src="/common/js/homepage/jquery.rwdImageMaps.min.js"></script>
<script src="/common/js/homepage/jquery.accessibility.modal.js"></script>
<script src="/common/js/comm/jquery.cookie.js"></script>
<script src="/common/js/homepage/plugin.js"></script>
<script src="/common/js/homepage/custom.js"></script>



  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
   /* -----------------------------------------------------------
   [기존 스타일 유지]
----------------------------------------------------------- */
html { background-color: #181818; }
body {
    background-color: #181818;
    color: #ffffff;
    font-family: 'Pretendard', sans-serif;
    padding: 60px 0;
}
.subject { color:white; text-decoration: none; }
.main-sub > ul > li > a { text-decoration: none; }
.info > ul > li > a { color:white; text-decoration: none; }
.info > ul > li { list-style:none; }
.footer_bot { padding:0px; }
.container { margin-top :160px; height:auto; }

/* 레이아웃 구조 */
.equal-height-row { display: flex; align-items: stretch; }
.sidebar {
    background-color: #000000;
    padding: 25px;
    border-radius: 10px;
    border: 1px solid #2a2a2a;
    height: auto;
}
.main-content-wrapper { display: flex; flex-direction: column; gap: 25px; height: auto; width: 100%; }

/* 사이드바 UI */
.mypage-title { border: 1px solid #c5a47e; padding: 20px; margin-bottom: 35px; text-align: center; }
.mypage-title h2 { font-size: 1.1rem; letter-spacing: 2px; margin: 0; }
.mypage-title p { font-size: 1.2rem; margin-top: 10px; font-weight: bold; }
.menu-group { margin-bottom: 25px; }
.menu-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
.header-content { display: flex; align-items: center; font-size: 0.95rem; font-weight: 500; line-height: 1; }
.icon-wrapper { width: 22px; height: 22px; margin-right: 8px; display: flex; align-items: center; justify-content: center; }
.icon-wrapper svg { stroke: #c5a47e; }
.menu-group>.menu-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; color: #888; text-decoration: none; font-size: 0.85rem; border-bottom: 1px solid #151515; }
.menu-item:hover { color: #c5a47e; }
.menu-item.now_page { color:#FFFFFF; }
.badge-outline { border: 1px solid #c5a47e; color: #c5a47e; padding: 1px 8px; font-size: 0.65rem; border-radius: 12px; }
.badge-outline.now_page_icon { color: black; background-color: #c5a47e; font-weight: bold; }

/* -----------------------------------------------------------
   [NOIR HOTEL 상세 페이지 전용 CSS - 이식 완료]
----------------------------------------------------------- */
.reservation-detail-container {
/*     background: #151515; */
    background: black; 
    position: relative;
    border: 1px solid #2a2a2a;
    padding: 50px;
    border-radius: 10px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
}

.reservation-detail-container::before {
    content: '';
    position: absolute;
    top: 15px; left: 15px; right: 15px; bottom: 15px;
    border: 1px solid #c5a47e;
    opacity: 0.1;
    pointer-events: none;
}

.res-header {
    text-align: center;
    margin-bottom: 3.5rem;
    padding-bottom: 2.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.res-status-badge {
    background-color: #c5a47e;
    color: #000;
    padding: 6px 20px;
    font-size: 0.75rem;
    font-weight: bold;
    display: inline-block;
    margin-bottom: 1.5rem;
    letter-spacing: 2px;
}

.res-id-number {
    color: #c5a47e;
    font-size: 1.1rem;
    letter-spacing: 2px;
    margin-top: 0.8rem;
    font-weight: 300;
}

.res-info-label {
    color: #777;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
}

.res-info-label i { margin-right: 10px; color: #c5a47e; }

.res-info-value {
	font-family: 'Nanum Myeongjo', serif;
    font-size: 1.05rem;
    color: #efefef;
    margin-bottom: 2rem;
    padding-bottom: 0.8rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    font-weight: 300;
}

.res-payment-box {
    background: #1d1d1d;
    padding: 1.8rem;
    border-radius: 4px;
    border: 1px solid #2a2a2a;
}

.res-total-label {
    font-weight: bold;
    text-transform: uppercase;
    color: #c5a47e;
    letter-spacing: 1.5px;
    font-size: 0.85rem;
}

.res-total-price {
    font-size: 1.8rem;
    color: #c5a47e;
    font-weight: bold;
}

.res-policy-box {
    background-color: #0f0f0f;
    border-left: 3px solid #c5a47e;
    padding: 1.8rem;
    margin-top: 3rem;
}

.res-policy-list {
    font-size: 0.85rem;
    color: #888;
    line-height: 2;
    list-style-type: none;
    padding-left: 0;
    margin-top: 1.2rem;
}

.res-policy-list li::before { content: "- "; margin-right: 5px; }

.noir-modal-content {
    background-color: #1a1a1a !important;
    color: #fff !important;
    border: 1px solid #c5a47e !important;
    border-radius: 0 !important;
}

.btn-noir-cancel {
    border: 1px solid #444;
    color: #888;
    background: transparent;
    padding: 12px 30px;
    font-size: 0.8rem;
    letter-spacing: 1.5px;
    transition: 0.3s;
}

.btn-noir-cancel:hover {
    border-color: #dc3545;
    color: #dc3545;
}


/* ============================================================
   [WEB] 예약 상세 섹션 디자인 (마이페이지 이식용)
   ============================================================ */
.reservation-detail-container {
    background: #151515;
    position: relative;
    border: 1px solid #2a2a2a;
    padding: 50px;
    border-radius: 10px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    font-family: 'Nanum Myeongjo', serif !important;
}

/* 시네마틱 골드 라인 */
.reservation-detail-container::before {
    content: '';
    position: absolute;
    top: 15px; left: 15px; right: 15px; bottom: 15px;
    border: 1px solid #c5a47e;
    opacity: 0.1;
    pointer-events: none;
}

/* 헤더 & 상태창 */
.res-header {
    text-align: center;
    margin-bottom: 3.5rem;
    padding-bottom: 2.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.res-status-badge {
    background-color: #c5a47e;
    color: #000;
    padding: 6px 20px;
    font-size: 0.75rem;
    font-weight: bold;
    display: inline-block;
    margin-bottom: 1.5rem;
    letter-spacing: 2px;
}

/* 정보 라벨 및 값 */
.info-label-noir {
    color: #777;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
}
.info-label-noir i { color: #c5a47e; margin-right: 10px; }

.info-value-noir {
font-family: 'Nanum Myeongjo', serif;
    font-size: 1.05rem;
    color: #efefef;
    margin-bottom: 2rem;
    padding-bottom: 0.8rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    font-weight: 300;
}

/* 결제 요약 박스 */
.payment-summary-noir {
    background: #1d1d1d;
    padding: 1.8rem;
    border-radius: 4px;
    border: 1px solid #2a2a2a;
}
.total-price-gold {
    font-size: 1.8rem;
    color: #c5a47e;
    font-weight: bold;
}

/* 규정 박스 */
.policy-box-noir {
    background-color: #0f0f0f;
    border-left: 3px solid #c5a47e;
    padding: 1.8rem;
    margin-top: 3rem;
}
.res-policy-list {
    font-size: 0.85rem;
    color: #888;
    line-height: 2;
    list-style-type: none;
    padding-left: 0;
}


.btn-action {
            border: 1px solid #c5a47e;
            color: #c5a47e;
            background: transparent;
            border-radius:5px;
            padding: 12px 25px;
            font-size: 0.85rem;
            letter-spacing: 1px;
            transition: 0.3s;
        }

  .btn-action:hover {
  			background-color:#c5a47e;
            color: #000;
        }








/*dsfsfdd  */

.main-content-wrapper, 
.reservation-detail-container, 
.reservation-detail-container *, 
.noir-modal-content, 
.noir-modal-content * {
    font-family: 'Nanum Myeongjo', serif !important;
}


/* 마우스 올렸을 때 (Hover) */
.backBtn:hover {
    color: #fff !important; /* 골드 색상으로 변경 */
}

.short-divider{
    max-height:265px;
}

	a{
		text-decoration: none;
	
	}
	
	  .footer-title{
    
    	margin-top: 5px;
    }
    
    
    
    
    
/*  dsfafsdafsdafsad*/ 

@media print {


  #printArea {
    min-height: 100vh;   /* 화면 기준 */
    background: #151515;
  }
  /* A4 여백 최소 */
  @page { size: A4; margin: 4mm 8mm; }

  body { 
    -webkit-print-color-adjust: exact; 
    print-color-adjust: exact; 
  }

  /* ✅ 출력은 printArea만 */
  body * { visibility: hidden !important; }
  #printArea, #printArea * { visibility: visible !important; }

  #printArea{
    position: fixed;
    left: 0; top: 0;
    width: 100%;
  }

  /* ✅ 2열 레이아웃 유지(스샷처럼) */
  #printArea .row{ 
    margin: 0 !important;
    --bs-gutter-x: 10px;  /* 너무 크면 6px로 */
    --bs-gutter-y: 6px;
  }

  /* 위 정보 영역: col-md-6 두 칸 유지 */
  #printArea .col-md-6{
    flex: 0 0 50% !important;
    max-width: 50% !important;
  }

  /* 결제 영역: 5/7 비율 유지 */
  #printArea .col-md-5{
    flex: 0 0 41.6667% !important;
    max-width: 41.6667% !important;
  }
  #printArea .col-md-7{
    flex: 0 0 58.3333% !important;
    max-width: 58.3333% !important;
  }

  /* ✅ 여백/패딩 압축 (2장 되는 주범) */
  #printArea .mt-5, #printArea .mt-4, #printArea .pt-4, #printArea .pt-2{
    margin-top: 6px !important;
    padding-top: 6px !important;
  }
  #printArea .mb-3, #printArea .mb-2{
    margin-bottom: 6px !important;
  }

  #printArea .reservation-detail-container{
    margin: 0 !important;
    padding: 0 !important;
  }

  /* ✅ 폰트/라인하이트 살짝만 줄임(안 깨지게) */
  #printArea *{
    font-size: 11px !important;
    line-height: 1.2 !important;
  }
  #printArea h2{ font-size: 16px !important; margin: 0 0 6px 0 !important; }
  #printArea .res-total-price{ font-size: 16px !important; font-weight: 700 !important; }

  /* ✅ 정책은 빼되, 가격/결제는 유지 */
   #printArea #cancelText{ display: none !important; } 

  /* ✅ 버튼/모달/헤더/푸터 제거 (프린트에 섞이면 2장됨) */
  header, footer, .btn, .backBtn, .modal{ display: none !important; }

  /* ✅ 페이지 쪼개짐 방지(특히 결제 박스) */
  #printArea, 
  #printArea .payment-summary-noir{
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }
}




   
    
    
</style>
<script th:inline="javascript">


$(function(){
	
	
	
	var cancelFlag = /*[[${cancelFlag == true}]]*/ false;
	
	var emailFlag = /*[[${emailFlag == true}]]*/ false;
	/* 	var cancelFlag=[[${cancelFlag==true}]]; */
		
		if(emailFlag){
			const modalElement = $("#emailModal");
			
			const emailModal = new bootstrap.Modal(modalElement);

			// 모달을 보여줍니다.
			emailModal.show();
			
		}
	
/* 	var cancelFlag=[[${cancelFlag==true}]]; */
	
	if(cancelFlag){
		alert("예약취소가 실패되었습니다. \n 잠시후 다시 시도해주세요");
		
	}//end if
	
	
	$("#emailBtn").click(function(){
		$("#emailFrm").submit();
		
	});//click
		
	
	
	
});


function goBackToList(){
	$("#hiddenFrm").submit();
}

</script>
</head>

<body>
<header>
    <th:block th:replace="~{fragments/header :: header}"></th:block>
</header>

<div class="container" th:object="${dinningRevDetail}">
    <div class="row equal-height-row g-4">
        
        <th:block th:replace="~{fragments/myPageSideBar :: myPageSideBar}"></th:block>

         <div class="col-lg-9" >
            <div class="main-content-wrapper" >
    <div class="reservation-detail-container" id="printArea" >
        
        <div class="res-header">
            <div class="res-status-badge">DINING RESERVATION CONFIRMED</div>
            <h2 class="fw-bold text-white mb-2" style="font-family: 'Nanum Myeongjo', serif; letter-spacing: 2px;">THE NOIR RESTAURANT</h2>
            <p class="res-id-number" style="font-family: 'Nanum Myeongjo', serif;"><span th:text="|Ref. *{reserveNum} |">Ref. DIN-1042</span> <span class="text-secondary mx-2">|</span><span th:text="|*{reserveName} 님|"> 박현욱 님</span></p>
        </div>

        <div class="row">
    <div class="col-md-6">
        <div class="res-info-label"><i class="bi-egg-fried me-2"></i>Dining Type</div>
        <div class="res-info-value text-uppercase" th:text="*{dinningName}">DINNER COURSE - NOIR SIGNATURE</div>

        <div class="res-info-label"><i class="bi bi-calendar-check me-2"></i>Reservation Schedule</div>
        <div class="res-info-value">
            <span th:text="*{visitDate}">2026-01-15</span>
            <span class="mx-2" style="opacity: 0.3;">|</span>
            <span th:text="*{visitTime}">19:30 PM</span>
            <small class="text-secondary ms-1" th:text="| ( *{dinningType} ) | ">(석식)</small>
        </div>

        <div class="info-label-noir"><i class="bi bi-people me-2"></i>Number of Guests</div>
        <div class="info-value-noir" th:text="|성인 *{adultCount} / 아동 *{childCount}|">성인 1 / 아동 2</div>
    </div>

    <div class="col-md-6 border-start border-secondary" style="--bs-border-opacity: .2;">
        <div class="res-info-label"><i class="bi bi-clock-history me-2"></i>Booked Date</div>
        <div class="res-info-value" th:text="*{reserveDate}">2026-01-01</div>
        
        <div class="info-label-noir"><i class="bi bi-telephone me-2"></i>TEL</div>
        <div class="info-value-noir" th:text="*{tel}">01012345678</div>
        
         <div class="info-label-noir"><i class="bi bi-envelope me-2"></i>Contact</div>
         <div class="info-value-noir" th:text="*{email}">mellifluous53@gmail.com</div>
        

    </div>
        <div class="info-label-noir"><i class="bi bi-exclamation-circle me-2"></i>Allergies & Requests</div>
        <div class="info-value-noir text-secondary small">
           <th:block th:if="*{reserveMsg eq null}">
			    No special requests.
			</th:block>
			
			<th:block th:unless="*{reserveMsg eq null}">
			    <span th:text="*{reserveMsg}"></span>
			</th:block>
        </div>
</div>

      <div class="row mt-4 pt-4 border-top border-secondary" style="--bs-border-opacity: .2;">
            <div class="col-md-5">
                <h6 class="res-info-label mb-3" style="color: #c5a47e;">Payment Information</h6>
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-credit-card-2-front fs-4 me-3 text-secondary"></i>
                    <div>
                        <div class="small" th:text="*{payAgency}">MasterCard (Debit)</div>
                        <div class="text-secondary small text-uppercase" th:text="*{#strings.substring(cardData,0,4)}+'-'+*{#strings.substring(cardData,4,8)} +'-'+*{#strings.substring(cardData,8,12)} +'-'+*{#strings.substring(cardData,12,16)}">**** **** **** 5678</div>
                    </div>															
                </div>
                <div class="small text-secondary mt-2" th:text="|Paid on: *{payInputDate}|">Paid on: 2025.12.20 14:30:22</div>
            </div>
            
            <div class="col-md-7">
                <div class="payment-summary-noir">
                    <div class="d-flex justify-content-between mb-2">
                        <span class="small text-secondary">Course Price </span>
                       <span class="small text-white" th:text="|KRW *{#numbers.formatInteger(roomPrice,3,'COMMA')}|">KRW 1,200,000</span>
                    </div>
               
                    <div class="d-flex justify-content-between mb-3">
                        <span class="small text-secondary">Tax & Service Charge (10%)</span>
                        <span class="small text-info" th:text="*{#numbers.formatInteger(roomTax,3,'COMMA')}">Included</span>
                    </div>
			        <div class="d-flex justify-content-between mb-3" id="cancelText">
			        <span class="small text-danger">Current Cancellation Fee</span>
			        <span class="small text-danger fw-bold" >KRW 0 (Free)</span> 
			        </div>
                    <div class="d-flex justify-content-between align-items-end pt-2 border-top border-secondary" style="--bs-border-opacity: .1;">
                        <span class="res-total-label">Total Amount</span>
                        <th:block th:if="*{reserveFlag eq 'Y'}"> 
						    <span class="res-total-price" style="text-decoration: line-through;" th:text="|KRW *{#numbers.formatInteger(roomPriceTotal, 3, 'COMMA')}|">KRW -1,200,000</span>
						</th:block>
						<th:block th:unless="*{reserveFlag eq 'Y'}">
						    <span class="res-total-price" th:text="|KRW *{#numbers.formatInteger(roomPriceTotal, 3, 'COMMA')}|">KRW 1,200,000</span>
						</th:block>
						
					
                   		
                    </div>
                </div>
            </div>
        </div>

        <div class="res-policy-box">
            <h6 class="res-info-label" style="color: #c5a47e;">Hotel Policy & Cancellation</h6>
            <ul class="res-policy-list">
                <li>예약 시간보다 15분 이상 늦으실 경우 예약이 자동 취소될 수 있습니다.</li>
                <li>당일 취소 및 노쇼(No-show) 시 예약금 환불이 불가합니다.</li>
                <li>특정 식재료에 대한 알러지가 있으신 경우 반드시 사전에 말씀해 주시기 바랍니다.</li>
            </ul>
        </div>

        <div class="mt-5 pt-4 border-top border-secondary" style="--bs-border-opacity: .2;">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <button class="btn btn-action me-2" onclick="window.print()">
                        <i class="bi bi-printer me-2"></i>출력
                    </button>
                   <th:block th:if="*{reserveFlag ne 'Y' and !checkInToday}"> 
                   <input type="button" value="이메일 발송" class="btn btn-action me-2" id="emailBtn"/>
                    <button class="btn btn-noir-cancel" data-bs-toggle="modal" data-bs-target="#cancelModal">
                       예약취소
                    </button>
                     </th:block> 
                </div>
            <button type="button" class="btn btn-link text-secondary text-decoration-none small backBtn" onclick="goBackToList()">뒤로가기</button>   
            <!--     <button class="btn btn-link text-secondary text-decoration-none small backBtn" th:onclick="|location.href='${param.from != null ? param.from[0] : '/mypage/reserve/hotelList'}'|">뒤로가기</button>
             --></div>
        </div>
    </div>
    
    <form th:action="@{/mypage/reserve/sendReserveEmail}" method="post" id="emailFrm">
    <input type="hidden" name="reserveNum" th:value="${dinningRevDetail.reserveNum}">
    <input type="hidden" name="reserveType" value="dinning">
</form>
    
  	
</div>
	  <form th:action="@{/mypage/reserve/memberDinningList}" method="get" id="hiddenFrm">
    	<input type="hidden" id="pageStartDate" name="startDate" th:value="${param.startDate}"/> 
    	<input type="hidden" id="pageEndDate" name="endDate"  th:value="${param.endDate}"/>
    	<input type="hidden" id="currentpage" name="currentpage" th:value="${param.currentpage}"/>
    	<input type="hidden" id="monthBtnValue" name="period" 
    	th:value="${param.period == null || param.period == ''} ? '' : ${param.period}"/>
    	<input type="hidden" name="reserveType" value="dinning"/>
    
    </form>

        </div>
    </div>
</div>


<div class="modal fade" id="cancelModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content noir-modal-content p-3">
            <div class="modal-header border-0">
                <h5 class="modal-title fw-bold" style="color:#c5a47e;">취소 확인</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body py-4 text-center">
                <p>정말로 예약을 취소하시겠습니까?</p>
                <p class="small text-danger mb-0">* 규정에 따라 체크인 2일 전부터는 취소 수수료가 발생합니다.</p>
            </div>
            <div class="modal-footer border-0 justify-content-center">
                <button type="button" class="btn btn-secondary btn-sm rounded-0 px-4" data-bs-dismiss="modal">아니오</button>
                <form th:action="@{/mypage/reserve/cancelDinningReserve}" method="post" style="display:inline;">
                     <input type="hidden" name="reserveNum" th:value="${dinningRevDetail.reserveNum}" /> 
                    <button type="submit" class="btn btn-danger btn-sm rounded-0 px-4">네, 취소합니다</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="emailModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content noir-modal-content p-3">
            <div class="modal-header border-0">
                <h5 class="modal-title fw-bold" style="color:#c5a47e;">이메일발송</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body py-4 text-center">
                <p th:text="${msg}">예약하신 이메일로 에약내역이 발송되었습니다.</p>
            </div>
            <div class="modal-footer border-0 justify-content-center">
                <button type="button" class="btn btn-secondary btn-sm rounded-0 px-4" data-bs-dismiss="modal">확인</button>
            </div>
        </div>
    </div>
</div>

<footer>
    <th:block th:replace="~{fragments/footer :: footer}"></th:block>
</footer>
   <div id="privacy-layer">
        <div th:replace="~{fragments/privacy :: privacy}"></div>
    </div>
<script type="text/javascript" src="/common/js/comm/jquery.validate.js"></script>
<script type="text/javascript" src="/common/js/comm/wings.core.js"></script>
<script type="text/javascript" src="/common/js/comm/PAGING_HOMEPAGE.js"></script>
<script type="text/javascript" src="/common/js/comm/kendo.web.min.js"></script>

</body>
</html>