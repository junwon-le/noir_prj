<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>마이페이지</title>


<link rel="stylesheet" type="text/css" href="/common/css/homepage/base.css">
<link rel="stylesheet" type="text/css" href="/common/css/homepage/style.css?v=0312">
<link rel="stylesheet" type="text/css" href="/common/css/homepage/sub.css?v=0312">
<!-- jQeury CDN 시작 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="/common/js/comm/jquery.bxslider.js"></script>
<script src="/common/js/homepage/jquery.rwdImageMaps.min.js"></script>
<script src="/common/js/homepage/jquery.accessibility.modal.js"></script>
<script src="/common/js/comm/jquery.cookie.js"></script>
<script src="/common/js/homepage/plugin.js"></script>
<script src="/common/js/homepage/custom.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style type="text/css">
 /* 기본 배경 및 레이아웃 */
    html, body { background-color: #181818; color: #ffffff; font-family: 'Pretendard', sans-serif; }
    .container { margin-top :220px; height:auto; }
    .equal-height-row { display: flex; align-items: stretch; }

    /* 사이드바 스타일 (기존 유지) */
    .sidebar {
        background-color: #000000;
        padding: 25px;
        border-radius: 10px;
        border: 1px solid #2a2a2a;
        height: auto;
        display: flex;
        flex-direction: column;
    }
    .mypage-title { border: 1px solid #c5a47e; padding: 20px; margin-bottom: 35px; text-align: center; }
    .mypage-title h2 { font-size: 1.1rem; letter-spacing: 2px; margin: 0; }
    .mypage-title p { font-size: 1.2rem; margin-top: 10px; font-weight: bold; }
    
    .menu-group { margin-bottom: 25px; }
    .menu-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .header-content { display: flex; align-items: center; font-size: 0.95rem; font-weight: 500; line-height: 1; color:#fff; }
    .icon-wrapper { width: 22px; height: 22px; margin-right: 8px; display: flex; align-items: center; justify-content: center; }
    .icon-wrapper svg { stroke: #c5a47e; }
    .menu-group>.menu-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; color: #888; text-decoration: none; font-size: 0.85rem; border-bottom: 1px solid #151515; }
    .menu-item:hover, .menu-item.now_page { color: #c5a47e; text-decoration: none; }
    .badge-outline { border: 1px solid #c5a47e; color: #c5a47e; padding: 1px 8px; font-size: 0.65rem; border-radius: 12px; }
    .badge-outline.now_page_icon{ color: black; background-color: #c5a47e; font-weight: bold; }

    /* 메인 콘텐츠 영역: 블랙 테마 */
    .main-content {
        background-color: #000000 !important;
        padding: 60px 50px;
        border-radius: 10px;
        border: 1px solid #2a2a2a;
        height: auto !important;
    }

    .pw-header {
        border-bottom: 1px solid #222;
        padding-bottom: 25px;
        margin-bottom: 50px;
    }
    .pw-header h3 { font-size: 1.8rem; font-weight: 600; color: #ffffff; margin-bottom: 10px; }
    .pw-header p { font-size: 0.9rem; color: #666; }

    /* 이미지 스타일의 라운드 입력창 (핵심 디자인 변경) */
    .pw-input-group { margin-bottom: 35px; }
    .pw-label {
        display: block;
        font-size: 0.8rem;
        font-weight: 600;
        color: #999;
        margin-bottom: 12px;
        letter-spacing: 0.5px;
    }
    .pw-label i { color: #c5a47e; font-style: normal; margin-left: 2px; }

    .noir-input {
        width: 100%;
        background-color: #1a1a1a !important; /* 이미지_8b466a 스타일 */
        border: 1px solid #333 !important;
        border-radius: 12px !important; /* 라운드 처리 */
        color: #ffffff !important;
        padding: 15px 20px !important;
        font-size: 0.95rem;
        transition: all 0.3s ease;
    }
    .noir-input:focus {
        outline: none;
        border-color: #c5a47e !important;
        background-color: #222 !important;
        box-shadow: 0 0 8px rgba(197, 164, 126, 0.2) !important;
    }
    .noir-input::placeholder {
        color: #555;
        font-size: 0.9rem;
    }

    /* 하단 안내 문구 */
    .pw-guide-list { list-style: none; padding: 0; margin-top: 15px; }
    .pw-guide-list li { font-size:0.8rem; color: #555; margin-bottom: 6px; line-height: 1.4; }
    .pw-guide-list li::before { content: "* "; color: #c5a47e; }

    /* 상태 메시지 */
    #pwStatusMessage { font-size: 0.8rem; margin-top: 10px; min-height: 20px; }
    .msg-error { color: #e74c3c; }
    .msg-success { color: #c5a47e; }

    /* 확인 버튼 */
    .btn-pw-confirm {
        background-color: #c5a47e;
        color: #000;
      border : 1px solid #c5a47e;
        width: 200px;
        padding: 16px 0;
        font-weight: 700;
        font-size: 1rem;
        letter-spacing: 1px;
        margin-top: 65px;
        border-radius: 12px;
        transition: 0.3s ease;
    }
    .btn-pw-confirm:hover {
        background-color: #000000;
        color: #c5a47e;
        border : 1px solid #c5a47e;
        
        transform: translateY(-2px);
    }
    
    .noir-input.now_pass{
    
    width: 49%;
    
    }
    a{
    	text-decoration: none;
    }
    
 .footer-title{
    	margin-top: 5px;
    }
    
    
       /* 신규 모달 전용 스타일 */
        .hotel-modal-content {
            background-color: #1a1a1a !important;
            border: 1px solid #c5a47e !important;
            border-radius: 0 !important;
        }
        .hotel-modal-header {
            border-bottom: 1px solid #2a2a2a !important;
        }
        .hotel-modal-title {
            color: #c5a47e !important;
            font-size: 1rem !important;
            letter-spacing: 2px;
        }
        .hotel-modal-body {
            color: #ffffff !important;
            text-align: center;
            padding: 40px 20px !important;
        }
        .hotel-modal-footer {
            border-top: 1px solid #2a2a2a !important;
            justify-content: center !important;
        }
        .hotel-modal-btn {
            background-color: #c5a47e !important;
            color: #000 !important;
            border-radius: 0 !important;
            padding: 8px 40px !important;
            font-weight: bold !important;
        }
 

</style>

<script th:inline="javascript">



var CONTEXT = '';

var flag = /*[[${flag==false}]]*/ false;

/* var flag=true;
flag=[[${flag==false}]]; */
$(function(){
	
	//변경완료 버튼을 누를 시(유효성 검사)
	$("#btn").click(function(){
		var currentPassword=$("#currentPassword").val();
		var newPassword=$("#newPassword").val();
		var ConfirmPassword=$("#ConfirmPassword").val();
		
		if(currentPassword==''){
			showHotelAlert("현재 비밀번호를 입력해주세요.");
			return false;
		}//end if
		
		if(newPassword==''){
			showHotelAlert("새로운 비밀번호를 입력해주세요.");
			return false;
		}//end if
		
		if(ConfirmPassword==''){
			showHotelAlert("새로운 비밀번호 확인을 입력해주세요.");
			return false;
		}//end if
		if(newPassword!==ConfirmPassword){
			showHotelAlert("새로운 비밀번호가 일치하지 않습니다.");
			return false;
		}//end if
		
		
		//비밀번호 길이 확인
		var newPassLength=newPassword.length < 8 || newPassword.length > 12
		var ConfirmPassLength=ConfirmPassword.length < 8 || ConfirmPassword.length > 12
		
		if (newPassLength && ConfirmPassLength) {
			showHotelAlert("새로운 비밀번호를 8~12이내로 입력해주세요");
			return false;
			
		}//end if
		
		//서비스에서 비밀번호가 일치한지 확인하고 
		//새로운 비밀번호를 일방향해시 후 update
		$("#passwordChangeForm").submit();
		
	});//click
	
	
	//frm으로 보내진 후 비밀번호가 일치하지 않았을 때
	if(flag){
		let pcDTO = /*[[${pcDTO}]]*/ {};
	/* 	let pcDTO=[[${pcDTO}]]; */
		let currentPassword=pcDTO.currentPassword;
		let newPassword=pcDTO.newPassword;
		let confirmPassword=pcDTO.confirmPassword;
		
		$("#currentPassword").val(currentPassword);
		$("#newPassword").val(newPassword);
		$("#ConfirmPassword").val(confirmPassword);
		
		
		showHotelAlert("현재 비밀번호가 일치하지 않습니다.");
		
	}//end if

	
});//ready

function showHotelAlert(msg) {
    $('#hotelModalBody').html(msg);
    var hotelModal = new bootstrap.Modal(document.getElementById('hotelNotifyModal'));
    hotelModal.show();
    
}




</script>



</head>

<body>
<header>
    <th:block th:replace="~{fragments/header :: header}"></th:block>
</header>

<div class="container">
    <div class="row equal-height-row g-4">
          <th:block th:replace="~{fragments/myPageSideBar :: myPageSideBar}"></th:block>
        <div class="col-lg-9">
            <div class="main-content">
                <div class="pw-header">
                    <h3>비밀 번호 변경</h3>
                    <p>현재 비밀번호를 올바르게 입력해야만 비밀번호 변경이 가능합니다.</p>
                </div>

                <form id="passwordChangeForm" th:action="@{/mypage/info/updatePassword}" method="post">
                    <div class="pw-input-group">
                        <label class="pw-label">현재 비밀번호 <sup><i>*</i></sup></label>
                        <input type="password" id="currentPassword" name="currentPassword" class="noir-input now_pass" placeholder="비밀번호를 입력해 주세요." maxlength="12">
                    </div> 
					
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="pw-input-group">
                                <label class="pw-label">새로운 비밀번호 <sup><i>*</i></sup></label>
                                <input type="password" id="newPassword" name="newPassword" class="noir-input" placeholder="새 비밀번호를 입력해 주세요." maxlength="12">
                                
                                <ul class="pw-guide-list">
                                    <li>비밀번호는 영문/숫자/특수문자 조합 8-12자리까지 입력 가능합니다.</li>
                                    <li>아이디 포함 또는 연속되는 문자/숫자(3자리 이상)는 불가합니다.</li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="pw-input-group">
                                <label class="pw-label">새로운 비밀번호 확인 <sup><i>*</i></sup></label>
                                <input type="password" id="ConfirmPassword" name="ConfirmPassword" class="noir-input" placeholder="비밀번호를 다시 입력해 주세요." maxlength="12">
                                <div id="pwStatusMessage"></div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                       <!--  <button type="submit" class="btn btn-pw-confirm">변경 완료</button> -->
                       <input type="button" class="btn btn-pw-confirm" id="btn" value="변경완료"/>
                    </div>
                </form>
            </div>
        </div>
        

        
    </div>
</div>
<div class="modal fade" id="hotelNotifyModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content hotel-modal-content">
            <div class="modal-header hotel-modal-header">
                <h5 class="modal-title hotel-modal-title">NOTICE</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body hotel-modal-body" id="hotelModalBody">
                </div>
            <div class="modal-footer hotel-modal-footer">
                <button type="button" class="btn hotel-modal-btn" data-bs-dismiss="modal">확인</button>
            </div>
        </div>
    </div>
</div>

<footer>
    <th:block th:replace="~{fragments/footer :: footer}"></th:block>
</footer>
   <div id="privacy-layer">
        <div th:replace="~{fragments/privacy :: privacy}"></div>
    </div>
<script type="text/javascript" src="/common/js/comm/jquery.validate.js"></script>
<script type="text/javascript" src="/common/js/comm/wings.core.js"></script>
<script type="text/javascript" src="/common/js/comm/PAGING_HOMEPAGE.js"></script>
<script type="text/javascript" src="/common/js/comm/kendo.web.min.js"></script>

</body>
</html>