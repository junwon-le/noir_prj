<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>NOIRí˜¸í…” ê´€ë¦¬ì review list í˜ì´ì§€</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- ğŸ”¥ ê´€ë¦¬ì ê³µí†µ CSS -->
<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
<link rel="stylesheet" href="/admin_common/css/bootstrap.min.css">
<link rel="stylesheet" href="/admin_common/css/font-awesome.min.css">
<link rel="stylesheet" href="/admin_common/css/nalika-icon.css">
<link rel="stylesheet" href="/admin_common/css/owl.carousel.css">
<link rel="stylesheet" href="/admin_common/css/owl.theme.css">
<link rel="stylesheet" href="/admin_common/css/owl.transitions.css">
<link rel="stylesheet" href="/admin_common/css/animate.css">
<link rel="stylesheet" href="/admin_common/css/normalize.css">
<link rel="stylesheet" href="/admin_common/css/meanmenu.min.css">
<link rel="stylesheet" href="/admin_common/css/main.css">
<link rel="stylesheet" href="/admin_common/css/scrollbar/jquery.mCustomScrollbar.min.css">
<link rel="stylesheet" href="/admin_common/css/metisMenu/metisMenu.min.css">
<link rel="stylesheet" href="/admin_common/css/metisMenu/metisMenu-vertical.css">
<link rel="stylesheet" href="/admin_common/style.css">
<link rel="stylesheet" href="/admin_common/css/responsive.css">

<script src="/admin_common/js/vendor/jquery-1.12.4.min.js"></script>
<script src="/admin_common/js/bootstrap.min.js"></script>
<script src="/admin_common/js/metisMenu/metisMenu.min.js"></script>
<script src="/admin_common/js/metisMenu/metisMenu-active.js"></script>
<script src="/admin_common/js/plugins.js"></script>
<script src="/admin_common/js/main.js"></script>

<style>
/* âœ… ë°°ê²½(ì´ë¯¸ì§€ ëŠë‚Œ) */
body, .all-content-wrapper{
  background:#0f1a2d;
}

/* ====== ëª©ë¡ í…Œì´ë¸” ====== */
.review-table-wrap{
  background:#ffffff;
  border-radius:12px;
  padding:20px;
  box-shadow:0 3px 8px rgba(0,0,0,0.05);
}

.review-table{ color:#38599a; }

.review-table thead th{
  background:#f4f6fb;
  text-align:center;
  font-weight:600;
}

.review-table tbody td{
  text-align:center;
  vertical-align:middle;
}
.review-table tbody td:nth-child(2){ text-align:left; }

.review-table tbody tr:hover{
  background:#f9fbff;
  cursor:pointer;
}

/* âœ… ì‚­ì œëœ ë¦¬ë·° í–‰ */
.review-row.is-deleted{
  opacity:0.55;
  background:#f7f7f7 !important;
  cursor:not-allowed !important;
}
.review-row.is-deleted:hover{ background:#f7f7f7 !important; }

/* âœ… ìƒíƒœ ë±ƒì§€ */
.badge-answered{
  background:#2ecc71;
  padding:6px 14px;
  border-radius:20px;
  font-size:12px;
  color:#fff;
}
.badge-not{
  background:#bdc3c7;
  padding:6px 14px;
  border-radius:20px;
  font-size:12px;
  color:#fff;
}
.badge-deleted{
  background:#e74c3c;
  padding:6px 14px;
  border-radius:20px;
  font-size:12px;
  color:#fff;
}

/* ====== ìƒì„¸(í…Œì´ë¸”í˜•) ====== */
.review-card{
  background:#ffffff;
  border-radius:12px;
  padding:25px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  color:#38599a;
}

.review-card h4{
  font-weight:600;
  margin-bottom:20px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}

.detail-table{
  width:100%;
  border-collapse:collapse;
  background:#fff;
}

.detail-table th, .detail-table td{
  border-top:1px solid #e6eaf2;
  padding:14px 16px;
  vertical-align:top;
}

.detail-table th{
  width:160px;
  color:#38599a;
  font-weight:700;
  background:#fff;
}

.detail-table td{ color:#2c3e50; }

.detail-btn-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:18px;
}

.detail-btn-row .right-btns{
  display:flex;
  gap:12px;   /* âœ… ê°„ê²© ì‚´ì§ ì¦ê°€ */
  flex-wrap:wrap;
  justify-content:flex-end;
}

/* âœ… ì´ë¯¸ì§€ ì¸ë„¤ì¼ */
.thumb{
  width:120px;
  height:120px;
  object-fit:cover;
  border-radius:12px;
  margin-right:8px;
  border:1px solid rgba(56,89,154,0.2);
}

.thumb-link{ display:inline-block; }

/* âœ… ë¡œë”© í…ìŠ¤íŠ¸ */
.loading-txt{
  color:#7f8c8d;
  font-size:13px;
}

/* ====== ê°ì‹¤ ë“œë¡­ë‹¤ìš´ ====== */
.room-select-wrapper{
  position:relative;
  width:280px;
}
.room-select-box{
  background:#f4f6fb;
  border:1px solid #cfd8e6;
  border-radius:12px;
  padding:14px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
  font-weight:600;
  color:#2c3e50;
  transition:all 0.2s ease;
}
.room-select-box:hover{ border-color:#3f5fa9; }
.room-select-dropdown{
  position:absolute;
  top:100%;
  left:0;
  width:100%;
  background:#ffffff;
  border-radius:12px;
  margin-top:8px;
  margin-bottom:8px;
  list-style:none;
  padding:10px 10px;
  box-shadow:0 6px 16px rgba(0,0,0,0.08);
  display:none;
  z-index:1000;
}
.room-select-dropdown li{
  padding:12px 20px;
  font-weight:500;
  color:#38599a;
  cursor:pointer;
  transition:all 0.15s ease;
}
.room-select-dropdown li:hover{ background:#f4f6fb; }

/* ====== í˜ì´ì§€ë„¤ì´ì…˜(ì¤‘ê°„) ====== */
.review-pagination{
  margin:22px 0 16px;
}
.review-pagination .pagination{ gap:6px; }

.review-pagination .page-item .page-link,
.review-pagination .page-item span.page-link{
  border:0 !important;
  background:#ffffff !important;
  color:#38599a !important;
  border-radius:10px !important;
  min-width:38px;
  height:38px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
}
.review-pagination .page-item.active .page-link{
  background:#bcd0ff !important;
  color:#1f2d4d !important;
}
.review-pagination .page-item.disabled .page-link{
  background:#eef2fb !important;
  color:#9aa7c2 !important;
  box-shadow:none;
}
.review-pagination .page-item:not(.disabled):not(.active) .page-link:hover{
  background:#f4f6fb !important;
}

/* =========================================================
   âœ… ì¶”ê°€/ìˆ˜ì •: ê´€ë¦¬ì ë‹µë³€ ì¹¸ + í•˜ë‹¨ ë²„íŠ¼ 4ê°œ ìŠ¤íƒ€ì¼
   ========================================================= */

/* âœ… ê´€ë¦¬ì ë‹µë³€ textarea ì»¬ëŸ¬/í†¤ */
#adminReply{
  background:#f6f8fc;                 /* ì—°í•œ ë¸”ë£¨ê·¸ë ˆì´ */
  border:1px solid #cfd8e6;
  border-radius:12px;
  color:#1f2d4d;
  padding:14px 14px;
  font-size:14px;
  line-height:1.6;
  box-shadow: inset 0 2px 8px rgba(0,0,0,0.04);
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
}
#adminReply:focus{
  background:#ffffff;
  border-color:#38599a;
  box-shadow: 0 0 0 4px rgba(56, 89, 154, 0.15);
  outline:none;
}

/* âœ… í•˜ë‹¨ ë²„íŠ¼ ê³µí†µ í¬ê¸° ì—… */
.detail-btn-row .btn{
  height:42px;
  padding:10px 18px;
  border-radius:12px;
  font-weight:700;
  font-size:14px;
  line-height:1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}

/* âœ… 1) ì‚­ì œ(ë¹¨ê°•) : ê¸°ì¡´ danger í†¤ ìœ ì§€ + ì¡°ê¸ˆ ì„¸ë ¨ë˜ê²Œ */
#deleteFrm .btn.btn-danger{
  background:#c94a4a;
  border:1px solid #c94a4a;
  box-shadow:0 8px 18px rgba(201,74,74,0.18);
}
#deleteFrm .btn.btn-danger:hover{
  background:#b13e3e;
  border-color:#b13e3e;
}

/* âœ… 2) ì·¨ì†Œ(ê·¸ë ˆì´) */
#cancelBtn{
  background:#eef2fb !important;
  border:1px solid #cfd8e6 !important;
  color:#38599a !important;
  box-shadow:none;
}
#cancelBtn:hover{
  background:#e6ebf7 !important;
  border-color:#b8c6de !important;
}

/* âœ… 3) ë‹µë³€ì‚­ì œ(ì•„ì›ƒë¼ì¸) */
#deleteReplyFrm .btn.btn-outline-secondary{
  background:#ffffff;
  border:1px solid #cfd8e6;
  color:#38599a;
}
#deleteReplyFrm .btn.btn-outline-secondary:hover{
  background:#f4f6fb;
  border-color:#38599a;
  color:#38599a;
}

/* âœ… 4) ë‹µë³€(ë¸”ë£¨) : ì§€ê¸ˆê¹Œì§€ ì“°ë˜ ë¸”ë£¨ í†¤ */
#replyBtn{
  background:#38599a !important;
  border:1px solid #38599a !important;
  color:#ffffff !important;
  box-shadow:0 10px 22px rgba(56,89,154,0.22);
}
#replyBtn:hover{
  background:#2f4f8b !important;
  border-color:#2f4f8b !important;
}
</style>
</head>

<body>

<!-- ğŸ”¥ ì‚¬ì´ë“œë°” -->
<div th:replace="~{manager/fragments/sidebar :: sidebar}"></div>

<div class="all-content-wrapper">

  <!-- ğŸ”¥ header -->
  <div class="header-advance-area">
    <div class="breadcome-area">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="breadcome-list">
              <div class="breadcomb-wp" style="color:#ffffff;font-size:20px">
                <h2>í›„ê¸° ê´€ë¦¬</h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ğŸ”¥ ë³¸ë¬¸ -->
  <div class="container" style="color:white; min-height:700px">

    <!-- =========================
         1) í›„ê¸° ëª©ë¡
         ========================= -->
    <h3 style="margin-bottom:20px;">í›„ê¸° ëª©ë¡</h3>

    <!-- ê°ì‹¤ í•„í„° (ì»¤ìŠ¤í…€ ë“œë¡­ë‹¤ìš´) -->
    <div class="room-select-wrapper mb-4">
      <div class="room-select-box" id="roomSelectBtn">
        <span id="selectedRoomText">ê°ì‹¤ íƒ€ì… ì„ íƒ</span>
        <span class="arrow">â–¾</span>
      </div>

      <ul class="room-select-dropdown" id="roomSelectMenu">
        <li data-url="/admin/review/list">ì „ì²´</li>
        <li data-url="/admin/review/adminRoomList?num=1">STANDARD QUEEN</li>
        <li data-url="/admin/review/adminRoomList?num=2">SEMI-DELUXE DOUBLE</li>
        <li data-url="/admin/review/adminRoomList?num=3">DELUXE DOUBLE</li>
        <li data-url="/admin/review/adminRoomList?num=4">DELUXE TWIN</li>
        <li data-url="/admin/review/adminRoomList?num=5">FAMILY TWIN</li>
      </ul>
    </div>

    <!-- ë¦¬ë·° í…Œì´ë¸” -->
    <div class="table-responsive review-table-wrap">
      <table class="table review-table">
        <thead>
          <tr>
            <th>ë²ˆí˜¸</th>
            <th>ì œëª©</th>
            <th>ì‘ì„±ì</th>
            <th>ë“±ë¡ì¼</th>
            <th>ë³„ì </th>
            <th>ë‹µë³€ì—¬ë¶€</th>
          </tr>
        </thead>
        <tbody>

          <tr th:if="${#lists.isEmpty(reviewAllList)}">
            <td colspan="6" style="padding:40px 0; color:#9aa7c2;">ì‘ì„±ëœ í›„ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
          </tr>

          <tr th:each="r : ${reviewAllList}"
              class="review-row"
              th:classappend="${r.reviewDelFlag == 'Y'} ? ' is-deleted' : ''"
              th:data-reviewnum="${r.reviewNum}"
              th:data-del="${r.reviewDelFlag}"
              style="cursor:pointer;">
            <td th:text="${r.reviewNum}"></td>
            <td th:text="${r.reviewTitle}"></td>
            <td th:text="${r.memberLastName}"></td>
            <td th:text="${#dates.format(r.reviewDate,'yyyy-MM-dd')}"></td>
            <td th:text="${r.reviewStar}"></td>
            <td>
              <span th:if="${r.reviewDelFlag == 'Y'}" class="badge-deleted">ì‚­ì œë¨</span>

              <span th:if="${r.reviewDelFlag != 'Y'} and ${r.reviewReturn != null and !#strings.isEmpty(r.reviewReturn)}"
                    class="badge-answered">ë‹µë³€ì™„ë£Œ</span>

              <span th:if="${r.reviewDelFlag != 'Y'} and ${r.reviewReturn == null or #strings.isEmpty(r.reviewReturn)}"
                    class="badge-not">ë¯¸ë‹µë³€</span>
            </td>
          </tr>

        </tbody>
      </table>
    </div>

    <!-- =========================
         2) í˜ì´ì§€ë„¤ì´ì…˜ (ì¤‘ê°„)
         ========================= -->
    <div class="review-pagination"
         th:utext="${pagination != null ? pagination : ''}">
    </div>

    <!-- =========================
         3) í›„ê¸° ìƒì„¸ (í…Œì´ë¸” ë¶„ë¦¬)
         ========================= -->
    <h3 style="margin:30px 0 20px;">í›„ê¸° ìƒì„¸</h3>

    <div id="reviewDetailBox" class="d-none">
      <div class="review-card">

        <h4>
          <span>í›„ê¸° ìƒì„¸</span>
          <span id="detailBadge" class="badge-not">ì„ íƒ ëŒ€ê¸°</span>
        </h4>

        <table class="detail-table">
          <tr>
            <th>ì œëª©</th>
            <td id="d_title">-</td>
          </tr>
          <tr>
            <th>ì‘ì„±ì</th>
            <td id="d_writer">-</td>
          </tr>
          <tr>
            <th>í‰ì </th>
            <td id="d_star">-</td>
          </tr>
          <tr>
            <th>ê°ì‹¤ íƒ€ì…</th>
            <td id="d_room">-</td>
          </tr>
          <tr>
            <th>í›„ê¸° ë‚´ìš©</th>
            <td id="d_msg">-</td>
          </tr>
          <tr>
            <th>ì‚¬ì§„</th>
            <td>
              <div id="d_imgs" class="d-flex"></div>
            </td>
          </tr>
          <tr>
            <th>ê´€ë¦¬ì ë‹µë³€</th>
            <td>
              <textarea id="adminReply" class="form-control" rows="4" placeholder="ê´€ë¦¬ì ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            </td>
          </tr>
        </table>

        <div class="detail-btn-row">

          <form method="post" th:action="@{/admin/review/delete}" id="deleteFrm">
            <input type="hidden" name="reviewNum" id="deleteReviewNum">
            <button class="btn btn-danger" type="submit">ì‚­ì œ</button>
          </form>

          <div class="right-btns">
            <button type="button" class="btn btn-secondary" id="cancelBtn">ì·¨ì†Œ</button>

            <form method="post" th:action="@{/admin/review/delete-reply}" id="deleteReplyFrm" style="display:inline;">
              <input type="hidden" name="reviewNum" id="deleteReplyReviewNum">
              <button class="btn btn-outline-secondary" type="submit">ë‹µë³€ì‚­ì œ</button>
            </form>

            <form method="post" th:action="@{/admin/review/reply}" id="replyFrm" style="display:inline;">
              <input type="hidden" name="reviewNum" id="replyReviewNum">
              <input type="hidden" name="reviewReturn" id="replyHidden">
              <button type="button" class="btn btn-primary" id="replyBtn">ë‹µë³€</button>
            </form>
          </div>

        </div>

      </div>
    </div>

  </div>

  <div th:replace="~{manager/fragments/footer :: footer}"></div>
</div>

<script>
/** âœ… ì„¤ì •: ì´ë¯¸ì§€ ë² ì´ìŠ¤ ê²½ë¡œ */
const IMG_BASE = "/upload/review/";

/** âœ… URL íŒŒë¼ë¯¸í„° ì½ê¸° */
function getParam(name){
  const params = new URLSearchParams(window.location.search);
  return params.get(name);
}

/** âœ… ê°ì‹¤ ë²ˆí˜¸ â†’ ì´ë¦„ ë§¤í•‘ */
const ROOM_MAP = {
  "0": "ì „ì²´",
  "1": "STANDARD QUEEN",
  "2": "SEMI-DELUXE DOUBLE",
  "3": "DELUXE DOUBLE",
  "4": "DELUXE TWIN",
  "5": "FAMILY TWIN"
};

/** âœ… í˜ì´ì§€ ë¡œë“œì‹œ: í˜„ì¬ num íŒŒë¼ë¯¸í„° ê¸°ì¤€ìœ¼ë¡œ ì„ íƒ í…ìŠ¤íŠ¸ ìœ ì§€ */
$(function(){
  const num = getParam("num");
  if (num && ROOM_MAP[num]) {
    $("#selectedRoomText").text(ROOM_MAP[num]);
  } else {
    if (window.location.pathname === "/admin/review/list") {
      $("#selectedRoomText").text("ì „ì²´");
    } else {
      $("#selectedRoomText").text("ê°ì‹¤ íƒ€ì… ì„ íƒ");
    }
  }
});

/** âœ… ë±ƒì§€ ì„¸íŒ… */
function setDetailBadge(delFlag, reviewReturn) {
  const badge = $("#detailBadge");
  badge.removeClass("badge-not badge-answered badge-deleted");

  if (delFlag === "Y") {
    badge.addClass("badge-deleted").text("ì‚­ì œë¨");
    return;
  }
  if (reviewReturn && reviewReturn.trim() !== "") {
    badge.addClass("badge-answered").text("ë‹µë³€ì™„ë£Œ");
  } else {
    badge.addClass("badge-not").text("ë¯¸ë‹µë³€");
  }
}

/** âœ… ìƒì„¸ ì´ˆê¸°í™” */
function resetDetailBox() {
  $("#d_title").text("-");
  $("#d_writer").text("-");
  $("#d_star").text("-");
  $("#d_room").text("-");
  $("#d_msg").text("-");
  $("#adminReply").val("");

  $("#replyReviewNum").val("");
  $("#deleteReviewNum").val("");
  $("#deleteReplyReviewNum").val("");

  $("#d_imgs").empty().append("<span class='loading-txt'>í›„ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš”.</span>");

  $("#detailBadge").removeClass("badge-answered badge-deleted")
                   .addClass("badge-not")
                   .text("ì„ íƒ ëŒ€ê¸°");
}
resetDetailBox();

/** âœ… ìƒì„¸ ë¡œë“œ */
$(document).on("click", ".review-row", function () {
  const reviewNum = $(this).data("reviewnum");
  const delFlag = ($(this).data("del") || "N").toString();

  if (delFlag === "Y") {
    alert("ì‚­ì œëœ ë¦¬ë·°ì…ë‹ˆë‹¤.");
    return;
  }

  $("#reviewDetailBox").removeClass("d-none");
  $("#d_imgs").empty().append("<span class='loading-txt'>ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>");

  $.get("/admin/review/detail-json", { reviewNum: reviewNum }, function (res) {
    if (!res || !res.ok) { alert("ìƒì„¸ ì¡°íšŒ ì‹¤íŒ¨"); return; }

    const d = res.detail || {};
    const imgs = res.imgList || [];

    $("#d_title").text(d.reviewTitle || "-");
    $("#d_writer").text(d.memberLastName || "-");
    $("#d_star").text(d.reviewStar ?? "-");
    $("#d_room").text(d.roomType || "-");
    $("#d_msg").text(d.reviewMsg || "-");

    $("#adminReply").val(d.reviewReturn || "");

    const num = d.reviewNum || reviewNum;
    $("#replyReviewNum").val(num);
    $("#deleteReviewNum").val(num);
    $("#deleteReplyReviewNum").val(num);

    setDetailBadge(d.reviewDelFlag || "N", d.reviewReturn || "");

    const box = $("#d_imgs").empty();
    if (!imgs || imgs.length === 0) {
      box.append("<span style='color:#7f8c8d;'>ë“±ë¡ëœ ì‚¬ì§„ì´ ì—†ìŠµë‹ˆë‹¤.</span>");
    } else {
      imgs.forEach(function (fn) {
        if (!fn) return;
        box.append(
          "<a class='thumb-link' href='" + IMG_BASE + fn + "' target='_blank'>" +
            "<img class='thumb' src='" + IMG_BASE + fn + "' alt='review image'>" +
          "</a>"
        );
      });
    }
  });
});

/** âœ… ë‹µë³€ ì €ì¥ */
$(document).on("click", "#replyBtn", function () {
  const reviewNum = $("#replyReviewNum").val();
  const txt = ($("#adminReply").val() || "").trim();

  if (!reviewNum) { alert("í›„ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš”"); return; }
  if (!txt) { alert("ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”"); return; }

  if ($("#detailBadge").hasClass("badge-deleted")) {
    alert("ì‚­ì œëœ ë¦¬ë·°ì—ëŠ” ë‹µë³€ì„ ì €ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }

  $("#replyHidden").val(txt);
  $("#replyFrm").submit();
});

/** âœ… ì‚­ì œ / ë‹µë³€ì‚­ì œ submit ê°€ë“œ */
$(document).on("submit", "#deleteFrm", function (e) {
  const reviewNum = $("#deleteReviewNum").val();
  if (!reviewNum) { alert("í›„ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš”"); e.preventDefault(); return; }
  if (!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { e.preventDefault(); }
});

$(document).on("submit", "#deleteReplyFrm", function (e) {
  const reviewNum = $("#deleteReplyReviewNum").val();
  if (!reviewNum) { alert("í›„ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš”"); e.preventDefault(); return; }
  if (!confirm("ë‹µë³€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { e.preventDefault(); }
});

/** âœ… ì·¨ì†Œ: ìƒì„¸ ì ‘ê¸° */
$(document).on("click", "#cancelBtn", function(){
  $("#reviewDetailBox").addClass("d-none");
});

/** âœ… ì»¤ìŠ¤í…€ ë“œë¡­ë‹¤ìš´ */
$("#roomSelectBtn").click(function(){
  $("#roomSelectMenu").slideToggle(150);
});

$("#roomSelectMenu li").click(function(){
  const url = $(this).data("url");
  const txt = $(this).text();

  $("#selectedRoomText").text(txt);

  if (url) location.href = url;
});

$(document).click(function(e){
  if(!$(e.target).closest(".room-select-wrapper").length){
    $("#roomSelectMenu").slideUp(150);
  }
});
</script>

</body>
</html>